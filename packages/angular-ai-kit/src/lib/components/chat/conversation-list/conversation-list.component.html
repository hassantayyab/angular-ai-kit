<div [class]="containerClasses()">
  @if (isEmpty()) {
    <!-- Empty State -->
    <div class="text-muted-foreground px-2 py-4 text-center text-sm">
      {{ emptyMessage() }}
    </div>
  } @else {
    <!-- Grouped Conversations -->
    @for (group of groups(); track group.label) {
      <div class="ai-conversation-group mb-2">
        <!-- Group Label -->
        <div
          class="text-muted-foreground mb-1 px-2 text-xs font-medium tracking-wider uppercase"
        >
          {{ group.label }}
        </div>

        <!-- Conversation Items -->
        <div class="space-y-0.5">
          @for (conversation of group.conversations; track conversation.id) {
            <div class="group/item relative">
              <button
                type="button"
                class="hover:bg-accent w-full cursor-pointer rounded-md px-2 py-1.5 text-left text-sm transition-colors"
                [class.bg-accent]="isActive(conversation.id)"
                [attr.data-active]="isActive(conversation.id)"
                [title]="conversation.title"
                (click)="handleSelect(conversation.id)"
              >
                <span
                  class="block truncate transition-[padding-right] group-hover/item:pr-7"
                >
                  {{ conversation.title }}
                </span>
              </button>

              <!-- Delete Button (on hover) -->
              @if (showDelete()) {
                <ai-icon-button
                  icon="lucideTrash2"
                  ariaLabel="Delete conversation"
                  size="sm"
                  variant="ghost"
                  customClasses="absolute top-1/2 right-1 hidden -translate-y-1/2 group-hover/item:inline-flex hover:bg-destructive/10 hover:text-destructive"
                  (clicked)="handleDelete($event, conversation.id)"
                />
              }
            </div>
          }
        </div>
      </div>
    }
  }
</div>
