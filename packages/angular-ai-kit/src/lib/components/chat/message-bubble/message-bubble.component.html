<article
  [class]="containerClasses()"
  [attr.role]="'article'"
  [attr.aria-label]="ariaLabel()"
>
  <!-- Avatar section -->
  @if (showAvatar()) {
    <div [class]="avatarClasses()">
      @if (message().role === 'user') {
        <span class="text-lg" aria-hidden="true">ğŸ‘¤</span>
      } @else if (message().role === 'assistant') {
        <span class="text-lg" aria-hidden="true">ğŸ¤–</span>
      } @else {
        <span class="text-lg" aria-hidden="true">âš™ï¸</span>
      }
    </div>
  }

  <!-- Content section -->
  <div class="ai-message-bubble-content-wrapper min-w-0 flex-1">
    <div [class]="contentClasses()">
      {{ message().content }}
    </div>

    <!-- Actions section (shown on hover or when showActions is true) -->
    @if (showActions() || isHovered()) {
      <div [class]="actionsClasses()">
        <!-- Copy button -->
        <button
          type="button"
          [class]="buttonClasses()"
          [attr.aria-label]="'Copy message'"
          (click)="handleCopy()"
        >
          <span class="text-xs">ğŸ“‹</span>
          <span class="sr-only">Copy</span>
        </button>

        <!-- Regenerate button (only for assistant messages) -->
        @if (message().role === 'assistant') {
          <button
            type="button"
            [class]="buttonClasses()"
            [attr.aria-label]="'Regenerate message'"
            (click)="handleRegenerate()"
          >
            <span class="text-xs">ğŸ”„</span>
            <span class="sr-only">Regenerate</span>
          </button>
        }
      </div>
    }
  </div>
</article>
