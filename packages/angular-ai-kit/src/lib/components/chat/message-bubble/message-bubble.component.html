<article
  [class]="containerClasses()"
  [attr.role]="'article'"
  [attr.aria-label]="ariaLabel()"
>
  <!-- Avatar section -->
  @if (showAvatar()) {
    <div [class]="avatarClasses()">
      <ng-icon [name]="avatarIcon()" class="text-base" aria-hidden="true" />
    </div>
  }

  <!-- Content section -->
  <div class="ai-message-bubble-content-wrapper min-w-0 flex-1">
    <div [class]="contentClasses()">
      {{ message().content }}
    </div>

    <!-- Actions section (shown on hover or when showActions is true) -->
    @if (showActions() || isHovered()) {
      <div [class]="actionsClasses()">
        <!-- Copy button -->
        <button
          type="button"
          [class]="buttonClasses()"
          [attr.aria-label]="'Copy message'"
          [title]="'Copy to clipboard'"
          (click)="handleCopy()"
        >
          <ng-icon name="lucideCopy" class="text-base" />
          <span class="sr-only">Copy</span>
        </button>

        <!-- Regenerate button (only for assistant messages) -->
        @if (message().role === 'assistant') {
          <button
            type="button"
            [class]="buttonClasses()"
            [attr.aria-label]="'Regenerate message'"
            [title]="'Regenerate response'"
            (click)="handleRegenerate()"
          >
            <ng-icon name="lucideRefreshCw" class="text-base" />
            <span class="sr-only">Regenerate</span>
          </button>
        }
      </div>
    }
  </div>
</article>
