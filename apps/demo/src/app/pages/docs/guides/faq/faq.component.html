<div class="faq-container space-y-12">
  <!-- Header -->
  <div>
    <h1 class="text-foreground mb-4 text-4xl font-bold">FAQ</h1>
    <p class="text-muted-foreground text-lg">
      Frequently asked questions about Angular AI Kit.
    </p>
  </div>

  <!-- Search -->
  <div class="relative">
    <input
      type="text"
      placeholder="Search questions..."
      class="border-border bg-card text-foreground placeholder:text-muted-foreground focus:border-ring focus:ring-ring w-full rounded-lg border px-4 py-3 focus:ring-1 focus:outline-none"
      [value]="searchQuery()"
      (input)="onSearch($event)"
    />
    @if (searchQuery()) {
      <span
        class="text-muted-foreground absolute top-1/2 right-4 -translate-y-1/2 text-sm"
      >
        {{ filteredFaqItems.length }} results
      </span>
    }
  </div>

  <!-- FAQ by Category -->
  @for (category of categories; track category) {
    @if (getItemsByCategory(category).length > 0) {
      <app-doc-section
        [title]="category"
        [description]="'Questions about ' + category.toLowerCase()"
      >
        <div class="space-y-4">
          @for (item of getItemsByCategory(category); track item.question) {
            <details class="group border-border bg-card rounded-lg border">
              <summary
                class="text-foreground hover:bg-muted/50 flex cursor-pointer items-center justify-between p-4"
              >
                <span class="font-medium">{{ item.question }}</span>
                <svg
                  class="text-muted-foreground h-5 w-5 shrink-0 transition-transform group-open:rotate-180"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </summary>
              <div class="border-border border-t p-4">
                <div class="prose prose-sm text-muted-foreground max-w-none">
                  <p class="whitespace-pre-line">{{ item.answer }}</p>
                </div>
                @if (item.code) {
                  <div class="mt-4">
                    <app-doc-code-block
                      [code]="item.code"
                      language="typescript"
                    />
                  </div>
                }
              </div>
            </details>
          }
        </div>
      </app-doc-section>
    }
  }

  <!-- No Results -->
  @if (filteredFaqItems.length === 0) {
    <div class="border-border bg-card rounded-lg border p-8 text-center">
      <p class="text-foreground text-lg font-medium">
        No matching questions found
      </p>
      <p class="text-muted-foreground mt-2">
        Try a different search term or browse the categories above.
      </p>
      <button
        class="bg-primary text-primary-foreground hover:bg-primary/90 mt-4 rounded-lg px-4 py-2 text-sm font-medium"
        (click)="searchQuery.set('')"
      >
        Clear search
      </button>
    </div>
  }

  <!-- Still Have Questions -->
  <div class="border-border bg-muted/50 rounded-lg border p-6">
    <h3 class="text-foreground mb-2 text-lg font-semibold">
      Still have questions?
    </h3>
    <p class="text-muted-foreground mb-4 text-sm">
      Can't find what you're looking for? Check out these resources:
    </p>
    <div class="flex flex-wrap gap-3">
      <a
        routerLink="/docs/guides/troubleshooting"
        class="border-border bg-card text-foreground hover:border-border-hover inline-flex items-center gap-2 rounded-lg border px-4 py-2 text-sm font-semibold transition-all hover:shadow-sm"
      >
        Troubleshooting Guide
      </a>
      <a
        href="https://github.com/hassantayyab/angular-ai-kit/issues"
        target="_blank"
        rel="noopener noreferrer"
        class="border-border bg-card text-foreground hover:border-border-hover inline-flex items-center gap-2 rounded-lg border px-4 py-2 text-sm font-semibold transition-all hover:shadow-sm"
      >
        Open an Issue
      </a>
      <a
        href="https://github.com/hassantayyab/angular-ai-kit/discussions"
        target="_blank"
        rel="noopener noreferrer"
        class="border-border bg-card text-foreground hover:border-border-hover inline-flex items-center gap-2 rounded-lg border px-4 py-2 text-sm font-semibold transition-all hover:shadow-sm"
      >
        Discussions
      </a>
    </div>
  </div>
</div>
