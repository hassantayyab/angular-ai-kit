<div [class]="containerClasses()">
  <!-- Mobile Top Nav -->
  <app-top-nav [title]="conversationTitle()" />

  <!-- Scrollable Chat Area -->
  <div #scrollContainer [class]="scrollAreaClasses()">
    @if (isEmpty()) {
      <!-- Empty State - Centered -->
      <div class="flex min-h-full items-center justify-center">
        <div class="mx-auto w-full max-w-3xl">
          <app-empty-state (promptSelect)="handlePromptSelect($event)" />
        </div>
      </div>
    } @else {
      <!-- Message List (no internal scroll) -->
      <div class="mx-auto w-full max-w-3xl">
        <ai-message-list
          [messages]="messages()"
          [loading]="isLoading()"
          [showAvatars]="false"
          [actionsAlwaysVisible]="true"
          [autoScroll]="false"
          (messageCopy)="handleMessageCopy($event)"
          (messageRegenerate)="handleMessageRegenerate($event)"
        />
      </div>
    }
  </div>

  <!-- Fixed Input Area -->
  <div [class]="inputAreaClasses()">
    <div class="mx-auto w-full max-w-3xl">
      <app-chat-input
        [disabled]="isLoading()"
        [placeholder]="'Message Angular AI Kit...'"
        [suggestions]="activeSuggestions()"
        (messageSend)="handleSendMessage($event)"
      />
    </div>
  </div>
</div>
