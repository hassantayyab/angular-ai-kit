<div [class]="containerClasses()">
  <!-- Header (Mobile only - shows menu button) -->
  @if (showMobileMenuButton()) {
    <header [class]="headerClasses()">
      <button
        type="button"
        hlmBtn
        variant="ghost"
        size="icon"
        class="h-9 w-9"
        (click)="handleMenuClick()"
        aria-label="Open sidebar menu"
      >
        <svg
          class="h-5 w-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </button>

      <h1
        class="flex-1 truncate text-center text-sm font-medium text-[var(--foreground)]"
      >
        {{ conversationTitle() }}
      </h1>

      <!-- Spacer for centering -->
      <div class="w-9"></div>
    </header>
  }

  <!-- Main Chat Area -->
  <div [class]="chatAreaClasses()">
    @if (isEmpty()) {
      <!-- Empty State -->
      <app-empty-state (promptSelect)="handlePromptSelect($event)" />
    } @else {
      <!-- Message List with Spartan UI -->
      <app-message-list
        [messages]="messages()"
        [loading]="isLoading()"
        [autoScroll]="true"
        [showAvatars]="true"
        [customClasses]="'flex-1'"
        (messageCopy)="handleMessageCopy($event)"
        (messageRegenerate)="handleMessageRegenerate($event)"
      />
    }
  </div>

  <!-- Input Area -->
  <div [class]="inputAreaClasses()">
    <div class="mx-auto w-full max-w-3xl">
      <app-chat-input
        [disabled]="isLoading()"
        [placeholder]="'Message Angular AI Kit...'"
        (messageSend)="handleSendMessage($event)"
      />
    </div>
  </div>
</div>
