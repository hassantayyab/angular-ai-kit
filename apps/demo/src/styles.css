/* Angular AI Kit Demo - Design System
 * Architecture: Tailwind CSS v4 + Minimal CSS Variables for Spartan UI
 * Color Scale: Zinc (Tailwind built-in)
 */

@layer theme, base, components, utilities;
@import 'tailwindcss/theme.css' layer(theme);
@import 'tailwindcss/preflight.css' layer(base);
@import 'tailwindcss/utilities.css';
@import '@spartan-ng/brain/hlm-tailwind-preset.css';

@source '../../packages';

/* Tailwind v4 theme extension for sidebar colors */
@theme {
  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/* ============================================
   Semantic Design Tokens
   Using Tailwind theme() for all color values
   ============================================ */

@layer base {
  /* Light Theme (Default) */
  :root {
    /* Core Colors */
    --background: theme('colors.zinc.50');
    --foreground: theme('colors.zinc.950');

    /* Card */
    --card: theme('colors.white');
    --card-foreground: theme('colors.zinc.950');

    /* Popover */
    --popover: theme('colors.white');
    --popover-foreground: theme('colors.zinc.950');

    /* Muted */
    --muted: theme('colors.zinc.100');
    --muted-foreground: theme('colors.zinc.500');

    /* Accent */
    --accent: theme('colors.zinc.100');
    --accent-foreground: theme('colors.zinc.900');

    /* Border & Input */
    --border: theme('colors.zinc.200');
    --border-hover: theme('colors.zinc.300');
    --input: theme('colors.zinc.200');

    /* Foreground variants */
    --foreground-muted: theme('colors.zinc.500');

    /* Ring */
    --ring: theme('colors.zinc.400');

    /* Primary */
    --primary: theme('colors.zinc.900');
    --primary-foreground: theme('colors.zinc.50');

    /* Secondary */
    --secondary: theme('colors.zinc.100');
    --secondary-foreground: theme('colors.zinc.900');

    /* Destructive */
    --destructive: theme('colors.red.500');
    --destructive-foreground: theme('colors.zinc.50');

    /* Border Radius */
    --radius: 0.5rem;

    /* Sidebar (Spartan UI) */
    --sidebar-background: theme('colors.zinc.50');
    --sidebar-foreground: theme('colors.zinc.950');
    --sidebar-primary: theme('colors.zinc.900');
    --sidebar-primary-foreground: theme('colors.zinc.50');
    --sidebar-accent: theme('colors.zinc.200');
    --sidebar-accent-foreground: theme('colors.zinc.900');
    --sidebar-border: theme('colors.zinc.200');
    --sidebar-ring: theme('colors.zinc.400');
  }

  /* Dark Theme */
  .dark {
    /* Core Colors */
    --background: theme('colors.zinc.950');
    --foreground: theme('colors.zinc.50');

    /* Card */
    --card: theme('colors.zinc.900');
    --card-foreground: theme('colors.zinc.50');

    /* Popover */
    --popover: theme('colors.zinc.900');
    --popover-foreground: theme('colors.zinc.50');

    /* Muted */
    --muted: theme('colors.zinc.800');
    --muted-foreground: theme('colors.zinc.400');

    /* Accent */
    --accent: theme('colors.zinc.800');
    --accent-foreground: theme('colors.zinc.50');

    /* Border & Input */
    --border: theme('colors.zinc.700');
    --border-hover: theme('colors.zinc.600');
    --input: theme('colors.zinc.700');

    /* Foreground variants */
    --foreground-muted: theme('colors.zinc.500');

    /* Ring */
    --ring: theme('colors.zinc.600');

    /* Primary */
    --primary: theme('colors.zinc.50');
    --primary-foreground: theme('colors.zinc.900');

    /* Secondary */
    --secondary: theme('colors.zinc.800');
    --secondary-foreground: theme('colors.zinc.50');

    /* Sidebar (Spartan UI) */
    --sidebar-background: theme('colors.zinc.950');
    --sidebar-foreground: theme('colors.zinc.50');
    --sidebar-primary: theme('colors.zinc.50');
    --sidebar-primary-foreground: theme('colors.zinc.900');
    --sidebar-accent: theme('colors.zinc.800');
    --sidebar-accent-foreground: theme('colors.zinc.50');
    --sidebar-border: theme('colors.zinc.800');
    --sidebar-ring: theme('colors.zinc.600');
  }

  /* Base HTML Styles */
  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: theme('fontFamily.sans');
    background-color: var(--background);
    color: var(--foreground);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Selection */
  ::selection {
    background-color: var(--primary);
    color: var(--primary-foreground);
  }

  /* Focus Ring */
  :focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 9999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--muted-foreground);
  }

  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
  }
}

/* ============================================
   Component Styles
   ============================================ */

@layer components {
  /* CDK Dialog Overlay */
  .cdk-overlay-dark-backdrop {
    background-color: rgb(0 0 0 / 0.5);
    backdrop-filter: blur(4px);
    animation: overlay-fade-in 150ms ease-out;
  }

  /* Command Dialog Panel */
  .command-dialog-panel {
    background-color: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: theme('boxShadow.lg');
    overflow: hidden;
    outline: none;
    animation: dialog-slide-in 150ms ease-out;
  }

  /* CDK Overlay Centering */
  .cdk-global-overlay-wrapper {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding-top: 15vh;
  }

  /* Dialog Animations */
  @keyframes overlay-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes dialog-slide-in {
    from {
      opacity: 0;
      transform: scale(0.95) translateY(-10px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  /* Sidebar Host */
  .app-sidebar-host {
    overflow-x: hidden !important;
  }
}

/* ============================================
   Utility Animations
   ============================================ */

@layer utilities {
  /* Typing Indicator */
  .typing-dot {
    animation: typing-bounce 1.4s infinite ease-in-out both;
  }

  @keyframes typing-bounce {
    0%,
    80%,
    100% {
      transform: scale(0.6);
      opacity: 0.4;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Cursor Blink */
  .animate-cursor-blink {
    animation: cursor-blink 1s step-end infinite;
  }

  @keyframes cursor-blink {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
  }

  /* Hide Scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .typing-dot,
    .animate-cursor-blink {
      animation: none;
      opacity: 1;
    }
  }
}
